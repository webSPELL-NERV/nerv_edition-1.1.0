<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="description" content="Clanpage using webSPELL 4 CMS" />
	<meta name="author" content="webspell.org" />
	<meta name="keywords" content="webspell, webspell4, clan, cms" />
	<meta name="copyright" content="Copyright &copy; 2005 - 2011 by webspell.org" />
	<meta name="generator" content="webSPELL" />

<!-- Head & Title include -->
	<title>News</title>
	<script src="js/jquery-2.2.1.min.js" type="text/javascript"></script>
	<script src="js/_nerv-core.js" type="text/javascript"></script>
	<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="js/background-blur.js" type="text/javascript"></script>
	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	
	<script src="js/bootstrap-formhelpers.min.js" type="text/javascript"></script>
	<link href="css/bootstrap-formhelpers.min.css" rel="stylesheet" type="text/css" />
	
	<link href="css/_main.css" rel="stylesheet" type="text/css" />
	
	<link href="_stylesheet.css" rel="stylesheet" type="text/css" />
	<script src="js/bbcode.js" language="jscript" type="text/javascript"></script>
<!-- end Head & Title include -->
<script language="JavaScript" type="text/JavaScript">
<!-- 
function MM_openBrWindow(theURL,winName,features) { //v2.0
  window.open(theURL,winName,features);
}

default_language = "de";

message = new Array();
headline = new Array();
langs = new Array();

news_languages = new Array();
$langs

function update_language() {
	delete_array = new Array();
	for(var i = 0; i < news_languages.length; i++) {
		delete_array[i] = new Array(0, null);
	}
	for(var i = 0; i < langs.length; i++) {
		option = document.getElementById('lang_' + i);
		for(var z = 0; z < news_languages.length; z++) {
			if(option.options[z].selected == true) {
				delete_array[z][0] = 1;
				delete_array[z][1] = i;
			}
		}
	}
	for(var i = 0; i < langs.length; i++) {
		option = document.getElementById('lang_' + i);
		for(var z = 0; z < news_languages.length; z++) {
			if(delete_array[z][0] == 1 && delete_array[z][1] != i) {
				option.options[z].disabled = true;
				option.options[z].style.backgroundColor = '#B10000';
				option.options[z].style.display = 'none';
			}
			else {
				option.options[z].disabled = false;
				option.options[z].style.backgroundColor = '#FFFFFF';
				option.options[z].style.display = '';
			}
		}
	}
}

function initialize_language() {
	delete_array = new Array();
	for(var i = 0; i < news_languages.length; i++) {
		delete_array[i] = 0;
	}
	for(var i = 0; i < langs.length; i++) {
		option = document.getElementById('lang_' + i);
		for(var z = 0; z < news_languages.length; z++) {
			new_option = new Option(news_languages[z][1], news_languages[z][0], false, false);
			option.options[z] = new_option;
			if(langs[i] != '') {
				if(langs[i] == news_languages[z][0]) {
					option.options[z].selected = true;
					delete_array[z] = 1;
				}
			}
			else if(i == 0 && news_languages[z][0] == default_language) {
				option.options[z].selected = true;
				delete_array[z] = 1;
				langs[i] = news_languages[z][0];
			}
			else if(i != 0 && delete_array[z] == 0) {
				option.options[z].selected = true;
				delete_array[z] = 1;
				langs[i] = news_languages[z][0];
			}
		}
	}
}
function update_textarea(value) {
	document.getElementById('news_textarea').innerHTML='';
	for(var i = 0; i < value; i++) {
		if(message[i] || headline[i] || langs[i] && langs[i] != default_language)
		{
			document.getElementById('news_textarea').innerHTML+='<div class="row"><div class="col-lg-12"><select class="form-control" name="lang[]" id="lang_' + i + '" onchange="langs['+i+']=this.value; update_language();"></select></div></div> <div class="row"><h4 class="col-sm-2">%headline%</h4><div class="col-sm-10"><input class="form-control" name="headline[]" type="text" value="'+headline[i]+'" size="80" onchange="headline['+i+']=this.value;" /></div></div><div class="row"><div class="row"><div class="col-lg-12"><textarea class="form-control" name="message[' + i + ']" rows="20" cols="130" onfocus="which=this;textarea = \'message[' + i + ']\';" onblur="message['+i+']=this.value;" onchange="message['+i+']=this.value;">'+message[i]+'</textarea></div></div><br /><br />';
		}
		else
		{
			message[i] = '';
			headline[i] = '';
			langs[i] = '';
			document.getElementById('news_textarea').innerHTML+='<div class="row"><div class="col-lg-12"><select class="form-control" name="lang[]" id="lang_' + i + '" onchange="langs['+i+']=this.value; update_language();"></select></div></div><div class="row"><h4 class="col-sm-2">%headline%</h4><div class="col-sm-10"><input class="form-control" name="headline[]" type="text" value="" size="80" onchange="headline['+i+']=this.value;" /></div></div><div class="row"><div class="col-lg-12"><textarea class="form-control" name="message[' + i + ']" rows="20" cols="130" onfocus="which=this;textarea = \'message[' + i + ']\';" onblur="message['+i+']=this.value;" onchange="message['+i+']=this.value;"></textarea></div></div><br /><br />';
		}
	}
	if(message.length > value) {
		var message_length = message.length;
		for(var i = value; i < message_length; i++) {
			delete message[i];
			message.length--;
			delete headline[i];
			headline.length--;
			delete langs[i];
			langs.length--;
		}
	}
	
	initialize_language();
	update_language();
}

function chkFormular() {
	
	if(document.getElementsByName('headline[]')[0].value == "") {
		alert("%enter_title%");
		document.getElementsByName('headline[]')[0].focus();
   		return false;
	}
	
	if(message[0] == "" || typeof message[0] == undefined) {
		alert("%enter_text%");
   		return false;
	}
	message_text = '';
	x = 0;
	while(true){
		if(message[x]){
			message_text += message[x];
			x++;
		}
		else{
			break;
		}
	}
	if(!validbbcode(message_text)){
		return false;
	}
	
}

$message_vars
$headline_vars
$langs_vars

-->
</script>
<style type="text/css">
	body {margin: 0px;}
</style>
</head>
<body>
<form action="news.php?action=save" method="post" enctype="multipart/form-data" id="post" name="post" onsubmit="return chkFormular();">

<div class="panel panel-success">
	<div class="panel-heading">%new_post%</div>
	<div class="panel-body">
		$addflags
	</div>
	<div class="panel-body">
		<div class="panel panel-warning">
			<div class="panel-heading">%options%</div>
			<div class="panel-body">
				<!-- -->
				<b>%rubric%:</b> <select class="form-control" name="rubric">$rubrics</select>
				<input name="button" class="btn btn-info" type="button" onclick="MM_openBrWindow('upload.php?newsID=$newsID','Upload','scrollbars=yes,width=800,height=600')" value="%upload_images%" />
				&nbsp;&nbsp;&nbsp; <small><b>%options%:</b> &#8226; %html% &#8226; <a href="javascript:MM_openBrWindow('code.php','BBCode','scrollbars=yes,width=600,height=500')">%bbcode%</a> &#8226; <a href="javascript:MM_openBrWindow('smileys.php','Smileys','scrollbars=yes,width=340,height=500')">%smilies%</a></small></td>
				<!-- -->
			</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-4">
						<b>%languages%:</b><br>
						<div class="form-control">%post_languages%</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
							<b>%topnews%:</b><br>
							<select class="col-lg-12 form-control" name="topnews">$topnews</select>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
						<b>%intern%:</b><br>
						<select class="form-control" name="intern">$intern</select>
					</div>
				</div>
			</div>
		</div>
      
	$addbbcode
    <div id="news_textarea"></div>
      <script language="JavaScript" type="text/javascript">
      /* <![CDATA[ */
      update_textarea($langcount);
      /* ]]> */
      </script>
    <hr />
    <table width="100%" border="0" cellpadding="0" cellspacing="2">
      <tr>
        <td valign="top">%link% 1:
        <input name="link1" type="text" value="$link1" />
        <input name="url1" type="text" value="$url1" />
        <input class="input" name="window1" type="radio" value="1" $window1_new />
        %new_window%
        <input class="input" type="radio" name="window1" value="0" $window1_self/>
        %self%
        <br />
        %link% 2:
        <input name="link2" type="text" value="$link2" />
        <input name="url2" type="text" value="$url2" />
        <input class="input" name="window2" type="radio" value="1" $window2_new/>
        %new_window%
        <input class="input" type="radio" name="window2" value="0" $window2_self />
        %self%
        <br />
        %link% 3:
        <input name="link3" type="text" value="$link3" />
        <input name="url3" type="text" value="$url3" />
        <input class="input" name="window3" type="radio" value="1" $window3_new/>
        %new_window%
        <input class="input" type="radio" name="window3" value="0" $window3_self />
        %self%
        <br />
        %link% 4:
        <input name="link4" type="text" value="$link4" />
        <input name="url4" type="text" value="$url4" />
        <input class="input" name="window4" type="radio" value="1" $window4_new/>
        %new_window%
        <input class="input" type="radio" name="window4" value="0" $window4_self />
        %self%</td>
        <td valign="top"><br />&nbsp;</td>
      </tr>
      <tr>
        <td colspan="5"><hr /></td>
      </tr>
      <tr align="right">
        <td colspan="2">
        <input type="hidden" name="userID" value="$userID" />
        <input type="hidden" name="newsID" value="$newsID" />
        <select name="comments">$comments</select>
        <input type="submit" name="preview" value="%preview%" />
        <input type="submit" name="save" value="%save_news%" />
        <input type="button" onclick="window.close()" value="%cancel%" /></td>
      </tr>
    </table>
	</div>
</div>
</form>
</body>
</html>